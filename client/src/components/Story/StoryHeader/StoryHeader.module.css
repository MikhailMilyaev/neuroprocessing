:root{
  --header-btn: 36px;
  --header-icon: 24px;
  --story-header-h: 56px; /* выставляется из JS */
}

.header {
  background-color: #E6E6E6;
  padding: 4px 10px;
  border-radius: 15px;
  margin: 20px auto 15px auto;
  max-width: 800px;
  display: flex;
  align-items: center;
  gap: 12px;
  min-height: calc(var(--header-btn) + 3px);
}

.titleInput {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 18px;
  outline: none;
}

.actions {
  display: flex;
  align-items: center;
  gap: 12px; /* побольше зазор */
  margin-left: auto;
}

.iconBtn {
  width: var(--header-btn);
  height: var(--header-btn);
  aspect-ratio: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  padding: 0;
  margin: 0;
  border: 0;
  border-radius: 999px;

  appearance: none;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;

  color: #111;
  cursor: pointer;
  line-height: 0;
  transition: background-color .15s ease, opacity .15s ease, color .15s ease, transform .08s ease;
}
.iconBtn:not(:disabled):hover { background: #D9D9D9; }
.iconBtn:active { transform: translateY(1px); }
.iconBtn:disabled { opacity: .35; cursor: default; }
.iconBtn > svg { width: var(--header-icon); height: var(--header-icon); display:block; pointer-events:none; }

.lampBtn > svg { filter: grayscale(1) brightness(.7); transition: filter .15s ease; }
.lampBtn:hover > svg, .lampBtn:active > svg { filter: none; }
.menuBtn { color: #6b7280; }
.menuBtn:hover, .menuBtnActive { color: #000; }

.reevalPill {
  margin-left: auto;
  margin-right: 8px;
  background: #cde7ff;
  color: #0b3a64;
  padding: 8px 14px;
  border-radius: 14px;
  font-size: 15px;
  line-height: 1;
  user-select: none;
  white-space: nowrap;
  border: none;
}

.reviewPill { background: #FEF3C7; color: #78350F; }

.titleInputDesktop { display: block; }
.titleButtonMobile {
  display: none;
  flex: 1; min-width: 0;
  border: none; background: transparent;
  font-size: 18px; text-align: left;
  padding: 8px 0; color: #111;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Кнопка "Назад" на десктопе скрыта */
.backBtn{
  display:none;
  align-items:center;
  gap:6px;
  border:0;
  background:transparent;
  font-size:16px;
  color:#0a84ff;
  padding:6px 8px;
  border-radius:10px;
}
.backBtn:active{ background: rgba(10,132,255,.12); }
.backChevron{
  display:inline-block;
  font-weight:600;
  font-size:22px;
  line-height:1;
  transform: translateY(-1px);
}

/* ===== Мобилка / PWA ===== */
@media (max-width:900px){
  .titleInputDesktop { display: none; }

  .header{
    /* фиксируем наверху и учитываем safe area — работает и в Safari, и в iOS-PWA */
    position: fixed;
    left: 0; right: 0; top: 0;
    z-index: 2000;

    /* фон и «стекло» */
    background: #f5f5f5;
    backdrop-filter: saturate(150%) blur(10px);

    /* внутренние отступы: сверху добавляем вырез под «чёлку» */
    padding: calc(8px + env(safe-area-inset-top, 0px)) 10px 8px;

    margin: 0;
    border-radius: 0;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    box-shadow: 0 1px 0 rgba(0,0,0,.08);
    gap: 12px;
  }
  .reevalPill {
  display: inline-flex;
  align-items: center;          /* выравнивает текст по вертикали */
  justify-content: center;      /* по центру по горизонтали */
  padding: 6px 12px;            /* немного симметричнее */
  font-size: 14px;
  line-height: 1;               /* чтобы текст не тянул высоту */
  border-radius: 12px;
  margin-left: 6px;             /* отступ от стрелки */
  background: #cde7ff;
  color: #0b3a64;
  height: 32px;                 /* фиксируем высоту под кнопки */
  box-sizing: border-box;
}

  .actions{ margin-left: auto; gap: 12px; }

  .backBtn{ display:inline-flex; }
  .actions{ gap: 12px; }
  .iconBtn{ width:34px; height:34px; }
}

/* ===== Мобилка: выравниваем паддинги с хедером (10px) ===== */
@media (max-width: 900px) {
  /* такой же общий «поле» по краям, как у header */
  .wrapper {
    max-width: 100%;
    padding: 0 10px; /* совпадает с .header padding L/R */
  }

  /* сам редактор: фон не меняем, рамок/тени нет */
  .stage {
    background: transparent;
    border-radius: 0;
    box-shadow: none;

    /* отступы текста от краёв контейнера: слева/справа тоже 10px */
    padding: 12px 10px 16px;

    min-height: 200px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    /* тонкий, но видимый скролл */
    scrollbar-width: thin;
    scrollbar-color: rgba(0,0,0,.28) transparent;
  }
  .stage::-webkit-scrollbar { width: 6px; }
  .stage::-webkit-scrollbar-track { background: transparent; }
  .stage::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,.28); border-radius: 3px; }
  .stage::-webkit-scrollbar-thumb:hover { background-color: rgba(0,0,0,.38); }

  /* текст как в заметках: без лишних внутренних паддингов у самого editable */
  .editable {
    font-size: 17px;
    line-height: 26px;
    padding: 0;
    color: #222;
  }
  .editable[data-empty="true"]::before {
    left: 1px;
    color: #888;
  }

  /* полностью прячем гутер на мобилке */
  .gutter { display: none !important; }
}
