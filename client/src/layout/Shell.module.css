.shell {
  height: 100dvh;
  display: flex;
  flex-direction: column;
  background: var(--bg);
}

html, body { overflow-x: hidden; }

.mobileOnly { display: none; }
.desktopOnly { display: block; }

.layout {
  --sbw-open: clamp(260px, 18vw, 320px);
  --sbw: var(--sbw-open);
  display: grid;
  grid-template-columns: var(--sbw) 1fr;
  height: 100%;
  transition: grid-template-columns .45s cubic-bezier(.22,.61,.36,1);
}

.isCollapsed { grid-template-columns: 0px 1fr; }

.main {
  min-height: 0;
  height: 100%;
  overflow: auto;
  background: var(--bg);
  transition: transform .45s cubic-bezier(.22,.61,.36,1);
}

@media (max-width:700px) {
  .mobileOnly { display: block; }
  .desktopOnly { display: none; }

  :root { --drawerW: min(340px, 88vw); --peek: 12px; }

  .shell {
    height: 100dvh;
    background: var(--bg);
    overflow: hidden;
  }

  .mainMobile {
    position: relative;
    height: 100dvh;
    min-height: 100dvh;
    background: var(--bg);
    will-change: transform;
    transition: transform .45s cubic-bezier(.22,.61,.36,1);
    touch-action: pan-y;
    overscroll-behavior: none;
    padding-bottom: env(safe-area-inset-bottom);
  }

  .mobileSidebarInner {
    position: fixed;
    top: 0; bottom: 0; left: 0;
    width: var(--drawerW);
    background: #fff;
    transform: translateX(calc(-1 * var(--drawerW)));
    transition: transform .45s cubic-bezier(.22,.61,.36,1);
    will-change: transform;
    overflow: hidden;
    z-index: 4001;
    box-shadow: none;
  }

  .mobileShadeVisual {
    position: fixed;
    top: 0; right: 0; bottom: 0;
    background: #000;
    opacity: 0;
    transition: opacity .45s cubic-bezier(.22,.61,.36,1);
    z-index: 3999;
    pointer-events: none;
  }

  .mobileShadeHit {
    position: fixed;
    top: 0; right: 0; bottom: 0;
    background: transparent;
    z-index: 4002;
  }
}

:global(html.pwa-standalone) .shell {
  height: 100vh !important;
  min-height: 100vh !important;
}
:global(html.pwa-standalone) .layout {
  height: 100% !important;
}
:global(html.pwa-standalone) .main {
  height: 100% !important;
  overflow: auto !important;
  padding-bottom: 0 !important;
}
